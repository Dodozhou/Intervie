# 数据库
1. 索引相关
    * 什么是索引  
    索引是对数据库表中一列或多列的值进行排序的一种结构，使用索引可快速访问数据库表中的特定信息。
    * 什么时候使用索引  
    能够提升效率的时候使用索引。  
        * 在作为主键的列上，唯一性约束的列（不过大部分数据库会自动加索引）；
        * 在经常用在连接的列上，这些列主要是一些外键，可以加快连接的速度；
        * 在经常需要排序的列上创建索引，这样查询可以利用索引的排序，加快排序查询时间；
        * 在经常使用在WHERE子句中的列上面创建索引，加快条件的判断速度。
    * 什么时候不能使用索引  
    不能够提升效率的时候不使用索引，例如：该列很少进行查找或排序操作
    * 什么时候索引会失效
        * 查询的结果太大，性能消耗大于使用索引
        * where里面存在!=
        * 模糊查询的时候，通配符在第一个
        * where查询null值
2. 事务（Transaction）
    * 事务是是一个操作序列，这些操作要么都执行，要么都不执行，它是一个不可分割的工作单位。
    * 事务的四个属性 
        * 原子性 Atomic  
        就是事务应作为一个工作单元,事务处理完成，所有的工作要么都在数据库中保存下来，要么完全回滚，全部不保留 
        * 一致性 Consistent  
        事务完成或者撤销后，都应该处于一致的状态
        * 隔离性 Isolated  
        多个事务同时进行，它们之间应该互不干扰.应该防止一个事务处理其他事务也要修改的数据时，不合理的存取和不完整的读取数据 
        * 永久性 Durable  
        事务提交以后，所做的工作就被永久的保存下来
3. 什么是存储过程？有哪些优缺点？  
   存储过程是一些预编译的SQL语句。  
   更加直白的理解：存储过程可以说是一个记录集，它是由一些SQL语句组成的代码块，这些SQL语句代码像一个方法一样实现一些功能（对单表或多表的增删改查），然后再给这个代码块取一个名字，在用到这个功能的时候调用他就行了。
    * 存储过程是一个预编译的代码块，执行效率比较高
    * 一个存储过程替代大量SQL语句 ，可以降低网络通信量，提高通信速率
    * 可以一定程度上确保数据安全 
    * 缺点：移植性差
4. 简单说一说drop、delete与truncate这三种删除的区别
   * drop直接删掉表 truncate删除表中数据，再插入时自增长id又从1开始 delete删除表中数据  
   * 速度,一般来说: drop> truncate >delete 
   * delete语句是dml,这个操作会放到rollback segement中,事务提交之后才生效；如果有相应的trigger，执行的时候将被触发。truncate，drop是ddl, 操作立即生效，原数据不放到rollback segment中，不能回滚，操作不触发trigger。
   * DELETE语句执行删除的过程是每次从表中删除一行，并且同时将该行的删除操作作为事务记录在日志中保存以便进行进行回滚操作。TRUNCATE TABLE 则一次性地从表中删除所有的数据并不把单独的删除操作记录记入日志保存，删除行是不能恢复的。并且在删除的过程中不会激活与表有关的删除触发器。执行速度快。
   
   使用场景
   * 不再需要一张表的时候，用drop
   * 想删除部分数据行时候，用delete，并且带上where子句
   * 保留表而删除所有数据的时候用truncate
5. 什么是视图？以及视图的使用场景有哪些？  
    视图是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增，改，查，操作，试图通常是有一个表或者多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获取数据更容易，相比多表查询。
    * 只暴露部分字段给访问者，所以就建一个虚表，就是视图。
    * 查询的数据来源于不同的表，而查询者希望以统一的方式查询，这样也可以建立一个视图，把多个表查询结果联合起来，查询者只需要直接从视图中获取数据，不必考虑数据来源于不同表所带来的差异
6. 三大范式
    * 第一范式（1NF）：数据库表中的字段都是单一属性的，不可再分；
    * 第二范式（2NF）：数据库表中不存在字段对任一候选关码段的部分函数依赖；
    * 第三范式（3NF）：数据表中如果不存在字段对任一候选码字段的传递函数依赖。
7. SQL分为四种语言？
    * 数据定义语言 DDL
        * DDL主要是操作关系数据库的逻辑结构，通过CREATE，DROP，ALTER等语句来定义基本表，视图和索引等对象
    * 数据查询语言 DQL
        * DQL是用来对数据进行选择，通过特定条件从数据库保存的数据中选择相应的数据，同时可以对选择的数据进行一些运算操作，得到相关的汇总信息。DQL操作的对象可以是基本表，也可以是视图。
    * 数据操作语言DML
        * 数据操作的目的是改变数据库中的对象(基本表和视图)，包括修改，插入和删除等操作，UPDATE，INSERT和DELETE语句就是用来实现数据操作
    * 数据控制语言DCL
        * DCL是用来定义对基本表和视图的存取权限控制，对基本表的完整性规划的描述和事务控制等。
8. 超键、候选键、主键、外键分别是什么？
    * 超键：在关系中能唯一标识元组的属性集称为关系模式的超键。
    * 候选键：没有冗余元素的超键。
    * 主键：可以唯一地标识表中的某一条记录的键（和候选键一样，只不过一个表只能有一个主键）
    * 外键：在一个表中存在的另一个表的主键称此表的外键。
9. 数据库分区分表分库？
    * 分区:就是把一张表的数据分成N个区块，在逻辑上看最终只是一张表，但底层是由N个物理区块组成的
    * 分表:就是把一张表按一定的规则分解成N个具有独立存储空间的实体表。系统读写时需要根据定义好的规则得到对应的字表明，然后操作它。
    * 分库:一旦分表，一个库中的表会越来越多
10. 常用的单机数据库的瓶颈
    * 单个表数据量越大，读写锁，插入操作重新建立索引效率越低。
    * 单个库数据量太大（一个数据库数据量到1T-2T就是极限）
    * 单个数据库服务器压力过大
    * 读写速度遇到瓶颈（并发量几百）
11. 什么时候考虑分区？(mysql5开始支持分区)
    * 一张表的查询速度已经慢到影响使用的时候。
    * sql经过优化
    * 数据量大
    * 表中的数据是分段的
    * 对数据的操作往往只涉及一部分数据，而不是所有的数据
12. 什么时候考虑分表？
    * 一张表的查询速度已经慢到影响使用的时候。
    * sql经过优化
    * 数据量大
    * 当频繁插入或者联合查询时，速度变慢
13. 分表解决的问题?
    * 查询一次的时间短了
    * 数据分布在不同的文件，磁盘I/O性能提高
    * 读写锁影响的数据量变小
    * 插入数据库需要重新建立索引的数据减少
14. 分区和分表的区别与联系
    * 分区和分表的目的都是减少数据库的负担，提高表的增删改查效率。
    * 分区只是一张表中的数据的存储位置发生改变，分表是将一张表分成多张表。
    * 当访问量大，且表数据比较大时，两种方式可以互相配合使用。
    * 当访问量不大，但表数据比较多时，可以只进行分区。
15. 触发器的作用？
    * 触发器是一中特殊的存储过程，主要是通过事件来触发而被执行的。它可以强化约束，来维护数据的完整性和一致性，可以跟踪数据库内的操作从而不允许未经许可的更新和变化。可以联级运算。如，某表上的触发器上包含对另一个表的数据操作，而该操作又会导致该表触发器被触发。
16. 什么是锁？
    * 在所以的DBMS中，锁是实现事务的关键，锁可以保证事务的完整性和并发性。与现实生活中锁一样，它可以使某些数据的拥有者，在某段时间内不能使用某些数据或数据结构。当然锁还分级别的。
17. 视图的优缺点
    * 优点
    * 对数据库的访问，因为视图可以有选择性的选取数据库里的一部分
    * 用户通过简单的查询可以从复杂查询中得到结果
    * 维护数据的独立性，试图可从多个表检索数据
    * 对于相同的数据可产生不同的视图。
    * 缺点
    * 查询视图时，必须把视图的查询转化成对基本表的查询，如果这个视图是由一个复杂的多表查询所定义，那么，那么就无法更改数据
18. 在数据库中查询语句速度很慢，如何优化？
    * 建索引
    * 减少表之间的关联
    * 优化sql，尽量让sql很快定位数据，不要让sql做全表查询，应该走索引,把数据 量大的表排在前面 4.简化查询字段，没用的字段不要，已经对返回结果的控制，尽量返回少量数据 5.尽量用PreparedStatement来查询，不要用Statement

    